char card[] = {0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xd1,0x11,0x11,0x1d,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0x00};
char health[] = {0x0,0xa,0xa0,0x0,0x0,0x38,0x83,0x0,0x0,0x3,0x30,0x0,0x0,0x3,0x30,0x0,0x0,0x3,0x30,0x0,0x0,0x3,0x30,0x0,0x0,0xc3,0x13,0x0,0xc,0x33,0x13,0x30,0xc2,0x2f,0x21,0x23,0xc2,0x22,0x12,0x23,0xc,0x22,0x22,0x30,0x0,0xc3,0x33,0x0,0x00};
char hero[] = {0x2,0x0,0x0,0x0,0x0,0x0,0xf,0x0,0x6,0x60,0x0,0x0,0xf,0x0,0x66,0x66,0x0,0x0,0xf,0x6,0x66,0x66,0x60,0x0,0xf,0x0,0xe1,0xe1,0x0,0x0,0xf,0x0,0x1c,0xcc,0xcc,0xc0,0xcc,0xc0,0x1c,0xbb,0xbb,0xc0,0xc,0x66,0x6c,0xb2,0x2b,0xc0,0x6,0x66,0x6c,0xbb,0x2b,0xc0,0x0,0x6,0x6c,0xbb,0xbb,0xc0,0x0,0x8,0x88,0xcb,0xbc,0x0,0x0,0x6,0x66,0x6c,0xc0,0x0,0x0,0x6,0x66,0x66,0x0,0x0,0x0,0xbb,0xb0,0xbb,0xb0,0x0,0x00};
char rat[] = {0x0,0x90,0x0,0x40,0x0,0x9,0x99,0x0,0x0,0x2,0x92,0x0,0x0,0x99,0x44,0x40,0x9,0xbb,0x4,0x40,0x9b,0xb0,0x4,0x4b,0xcb,0xc0,0x44,0x4b,0xc0,0xc4,0xbb,0x4b,0x0,0x6,0xb6,0x4b,0xa,0x0,0x4,0xbb,0xa0,0x0,0x4b,0xbb,0xa,0xa6,0xb6,0xba,0x00};
char zombie[] = {0x0,0x5,0x55,0x50,0x0,0x52,0x52,0x50,0x0,0x55,0x55,0x50,0x0,0xc,0x11,0x5c,0xc5,0xa5,0x55,0x55,0x50,0xd,0xdd,0xcc,0x0,0xdd,0x5c,0xca,0x0,0xd0,0x55,0x55,0x0,0x0,0xd0,0x50,0x0,0x0,0xd0,0xc0,0x0,0x0,0xd0,0xa0,0x0,0xad,0x55,0x50,0x00};

int addhealth[4];

char position = 0;
char x = 104;
char y = 16;
char i, key;
int life = 10;
int maxLife = 10;
char score = 0;

void drawScore() {
	setimagesize(1);
	setcolor(1);
	gotoxy(1, 4);
	printf("score");
	gotoxy(1, 6);
	printf("%d", score);
	gotoxy(1, 10);
	printf("health");
	gotoxy(1, 12);
	printf("%d/%d ", life, maxLife);
}

void newCard(char x, char y, char position) {
	setimagesize(3);
	setcolor(2);

	if (random(4) == 0) {
		putimage(health, x, y, 8, 12);
		addhealth[position] = 3 + random(7);
		setcolor(5);
	} else {
		if (random(3) == 0) {
			putimage(zombie, x, y, 8, 12);
			addhealth[position] = -2 - random(maxLife / 3);
		} else {
			putimage(rat, x, y, 8, 12);
			addhealth[position] = -1 - random(maxLife / 4);
		}
	} 

	setimagesize(1);
	gotoxy(x / 6 + 1, y / 8 + 4);
	printf("%d", addhealth[position]);
	score++;
}

void moveRight() {
	for (i = 104; i <= 152; i = i + 4) {
		setimagesize(6);
		putimage(card, i, y, 8, 16);
		setimagesize(3);
		putimage(hero, i + 6, y + 20, 11, 14);
		delayredraw();
	}

	setimagesize(6);
	putimage(card, 104, y, 8, 16);
	newCard(x + 6, y + 24, position);
	x = 152;
	position++;
	life += addhealth[position];
}

void moveLeft() {
	for (i = 152; i >= 104; i = i - 4) {
		setimagesize(6);
		putimage(card, i, y, 8, 16);
		setimagesize(3);
		putimage(hero, i + 6, y + 20, 11, 14);
		delayredraw();
	}

	setimagesize(6);
	putimage(card, 152, y, 8, 16);
	newCard(x + 10, y + 24, position);
	x = 104;
	position--;
	life += addhealth[position];
}

void moveDown() {
	for (i = 16; i <= 112; i = i + 4) {
		setimagesize(6);
		putimage(card, x, i, 8, 16);
		setimagesize(3);
		putimage(hero, x + 6, i + 20, 11, 14);
		delayredraw();
	}

	setimagesize(6);
	putimage(card, x, 16, 8, 16);
	newCard(x + 8, y + 24, position);
	y = 112;
	position += 2;
	life += addhealth[position];
}

void moveUp() {
	for (i = 112; i >= 16; i = i - 4) {
		setimagesize(6);
		putimage(card, x, i, 8, 16);
		setimagesize(3);
		putimage(hero, x + 6, i + 20, 11, 14);
		delayredraw();
	}

	setimagesize(6);
	putimage(card, x, 112, 8, 16);
	newCard(x + 6, y + 24, position);
	y = 16;
	position -= 2;
	life += addhealth[position];
}

void move() {
	key = getkey();

	if ((key == KEY_LEFT) && ((position == 1) || (position == 3))) {
		moveLeft();
	} else if ((key == KEY_RIGHT) && ((position == 0) || (position == 2))) {
		moveRight();
	} else if ((key == KEY_DOWN) && (position < 2)) {
		moveDown();
	} else if ((key == KEY_UP) && (position > 1)) {
		moveUp();
	}
}

void main() {
	setimagesize(6);
	putimage(card, 104, 16, 8, 16);
	putimage(card, 152, 16, 8, 16);
	putimage(card, 104, 112, 8, 16);
	putimage(card, 152, 112, 8, 16);

	while (1) {
		drawScore();
		move();
		delayredraw();
	}
}